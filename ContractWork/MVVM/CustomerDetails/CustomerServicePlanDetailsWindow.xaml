<Window x:Class="ContractWork.MVVM.CustomerDetails.CustomerServicePlanDetailsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ContractWork.MVVM.CustomerDetails"
        xmlns:customcontrols="clr-namespace:ContractWork.CustomControls"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors" 
        xmlns:conv="clr-namespace:ContractWork.Converters"
        xmlns:libraries="clr-namespace:Servicelibraries.Services;assembly=Servicelibraries"
        
        d:DataContext="{d:DesignInstance Type=local:CustomerServicePlanDetailsViewModel}"
        mc:Ignorable="d"
        
        Height="450" Width="550"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True"
        WindowStartupLocation="CenterScreen"
        MouseLeftButtonDown="DragMe">
    <Window.Resources>
        <conv:InvertBoolConverter x:Key="Invert"/>
        <libraries:BindingProxy x:Key="proxy" Data="{Binding}"/>
        
    </Window.Resources>

    <Border Background="#903C39"
            CornerRadius="20"
            BorderThickness="2"
            BorderBrush="White">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="60"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="15"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150"/>
                <ColumnDefinition Width="150"/>
                <ColumnDefinition Width="160"/>
                <ColumnDefinition Width="90"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width=".13*" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"  
                           Text="Customer Service Plan Details"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center"
                           FontSize="20" Margin="20,0,0,0"
                           Foreground="White"/>

                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal">

                    <customcontrols:WindowControls
                        TextContent="-"
                        btnWidth="22"
                        btnMargin="0, 0, 0, 25"
                        btnBckgrnd="#F5B53F"
                        btnClick="btnMinimize_Click"
                    />

                    <customcontrols:WindowControls
                        TextContent="X"
                        btnWidth="22"
                        btnMargin="5, 0, 0, 25"
                        btnBckgrnd="#F55551"
                        btnClick="btnExit_Click"
                    />
                </StackPanel>
            </Grid>

            <Grid Grid.Row="1" Grid.RowSpan="2"
                  Grid.Column="0" Grid.ColumnSpan="4"
                  Background="#EBCECD">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="75"/>
                </Grid.ColumnDefinitions>
          
                <StackPanel Grid.Column="0" >
                    <StackPanel Orientation="Horizontal">
                        <Label Content="ID: " HorizontalAlignment="Left"/>
                        <TextBox Width="40" HorizontalAlignment="Left" IsReadOnly="True"
                                 Height="18" HorizontalContentAlignment="left"
                                 VerticalContentAlignment="top"
                             Margin="2,3,0,0" Text="{Binding CurrentCustomer.ServicePlanID}"/>
                    </StackPanel>
                    <Label Content="Contract #: " HorizontalAlignment="Right"/>
                    <Label Content="Account Name: " HorizontalAlignment="Right"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Grid.ColumnSpan="2">
                    <customcontrols:btnMaintenanceControl
                        btnBrdrWidth="40"
                        btnBrdrHeight="18"
                        btnBrdrCornerRadius="8"
                        MaintCornerRadius="7"
                        MaintBackground="#602826"
                        btnContentText="{Binding UnlockOrLockText}"
                        btnContentFontSize="9"
                        btnForeground="White"
                        btnBrdrMargin="2,5,0,0"
                        btnHorizAlign="Left"
                        btnClickCommand="{Binding UnlockStatusCommand}"
                    />
                    <TextBox Width="90" HorizontalAlignment="Left" IsReadOnly="True"
                             Margin="2,8,0,0" Text="{Binding CurrentCustomer.ServicePlanNumber}"/>
                    <TextBox Width="261" HorizontalAlignment="Left" IsReadOnly="True"
                             Margin="2,8,0,0" Text="{Binding CurrentCustomer.AccountName}"/>
                </StackPanel>
            </Grid>
          
            <StackPanel Grid.Row="1" Grid.Column="1">
                <CheckBox Content="Archived"
                          HorizontalAlignment="Right"
                          Margin="0,6,10,0" IsHitTestVisible="{Binding Unlock}" 
                          Focusable="{Binding Unlock}"
                          IsChecked="{Binding CurrentCustomer.Archive}" 
                          Command="{Binding ServicePlanArchiveCommand}"
                          CommandParameter="{Binding CurrentCustomer.Archive}"/>
                <Label Content="Status: "
                       HorizontalAlignment="Right"
                       Margin="0,5,33,0"/>
            </StackPanel>
            <ComboBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"
                      Height="18" Width="100"
                      Margin="16,0,0,21" 
                      VerticalContentAlignment="Center"
                      Padding="5,0,0,1"
                      IsHitTestVisible="{Binding Unlock}"
                      Focusable="{Binding Unlock}"
                      ItemsSource="{Binding PlanListcmb}"
                      SelectedItem="{Binding CurrentCustomer.ServicePlanStatus, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                      
                      IsReadOnly="True"/>
           
            <StackPanel Grid.Row="1" Grid.Column="2">
                <Label Content="Start Date: "
                       HorizontalAlignment="Right"/>
                <Label Content="Expire Date: "
                       HorizontalAlignment="Right"/>
                <Label Content="PO Date: "
                       HorizontalAlignment="Right"/>
            </StackPanel>
            <StackPanel Grid.Row="1" Grid.Column="3">
                <TextBox HorizontalAlignment="Left"
                         Width="80" Margin="0,5,0,0" IsReadOnly="False"
                         Text="{Binding CurrentCustomer.StartDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,
                    StringFormat={}{0:MM/d/yyyy}}"/>
                <TextBox HorizontalAlignment="Left"
                         Width="80" Margin="0,8,0,0" IsReadOnly="False"
                         Text="{Binding CurrentCustomer.ExpireDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,
                    StringFormat={}{0:MM/d/yyyy}}"/>
                <TextBox HorizontalAlignment="Left"
                         Width="80" Margin="0,8,0,0" IsReadOnly="False"
                         Text="{Binding CurrentCustomer.PoDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,
                    StringFormat={}{0:MM/d/yyyy}}"/>
            </StackPanel>

            <DataGrid Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4"
                      Margin="5,2,10,5"
                      AutoGenerateColumns="False"
                      ItemsSource="{Binding CurrentEquipmentList}">
                <DataGrid.Resources>
                    
                </DataGrid.Resources>
                
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Account Name" IsReadOnly="True"
                                        Width="200" Binding="{Binding AccountName}"/>
                    <DataGridTextColumn Header="Serial #" IsReadOnly="True"
                                        Width="120" Binding="{Binding SerialNumber}"/>
                    <DataGridTextColumn Header="Model" IsReadOnly="True"
                                        Width="70" Binding="{Binding Model}"/>
                    <DataGridTextColumn Header="Version" IsReadOnly="True"
                                        Width="70" Binding="{Binding Version}"/>

                    <DataGridTemplateColumn Header="Archive" Width="*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox IsChecked="{Binding EquipmentArchived, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                          
                                          IsHitTestVisible="{Binding Data.Unlock, Source={StaticResource proxy}}"
                                          >
                                    <!--Command="{Binding SerialNumberArchiveCommand}"-->
                                    <!--<i:Interaction.Triggers>
                                        <i:EventTrigger EventName="SelectionChanged">
                                            <i:InvokeCommandAction Command="{Binding UpdateEquipmentArchiveCommand}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>-->
                                    
                                    <!--{Binding Data.Unlock, Source={StaticResource proxy}, Converter={StaticResource Invert}}
                    Command="{Binding Data.SerialNumberArchiveCommand, Source={StaticResource proxy}}"-->
                                </CheckBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

            <Border CornerRadius="0,0,19,19"
                    Grid.Row="3" Grid.ColumnSpan="5"
                    Margin="0,0,4,0"
                    Background="#E7E8EB"/>

        </Grid>
    </Border>
</Window>
